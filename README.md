# STUDY-F401RCT6
Этот репозиторий представляет собой начало пути поэтапного изучения и развития навыков программирования микроконтроллеров на примере **STM32F401RCT6**.  
Каждый этап — это небольшой самостоятельный учебный проект, направленный на освоение отдельных подсистем микроконтроллера.

# **Первый этап — GPIO_Interruption** 
**Переключение светодиода с помощью прерываний по кнопке и антидребезга**

## Комплектующие
- Стандартная плата **BlackPill STM32F401**  
- Встроенная кнопка **USER_BUTTON**  
- Встроенный светодиод **(или внешний — в зависимости от конфигурации платы)**

## Общее описание
Цель проекта — понять:
- как работают внешние прерывания EXTI,
- как настроить GPIO на вход и выход,
- как реализовать программный антидребезг кнопки.

## Логика работы
- При нажатии кнопки вызывается обработчик прерывания EXTI0.  
- В обработчике запускается антидребезг:  
  SysTick каждые 1 ms проверяет стабильность состояния кнопки.  
- Если кнопка удерживает состояние достаточное время — считается, что «нажата корректно», и светодиод переключает состояние.

---

# Второй этап — TIM_PWM
**Генерация PWM сигналов при помощи таймеров общего назначения**

## Комплектующие
- Стандартная плата **BlackPill STM32F401**  
- Встроенная кнопка **USER_BUTTON**  
- Встроенный светодиод **(или внешний — в зависимости от конфигурации платы)**
- Светодиод, подключенный к пину с поддержкой **TIM3_CHx** (или встроенный при наличии)

## Общее описание
Цель проекта — понять, как:
- настраивать таймеры в режиме счёта,
- выбирать частоту и разрешение PWM,
- выводить сигнал на GPIO через альтернативную функцию,
- управлять яркостью светодиодов или приводить в движение сервоприводы.

## Логика работы
- По умолчанию включается режим переливания яркости светодиода, реализованный с помощью TIM3CH1
- При нажатию на кнопку вызывается обработчик состояния кнопки 
- При нажатии на кнопку более 2с переключается режим регулировапния якрости 
- Второй режим регулировки яркости реализован с помощью кратковременных нажатий на кнопку (каждое нажатие +10% яркости)

---

# Третий этап - I2C

Учебный проект для микроконтроллера **STM32F401RCT6**, демонстрирующий **первые шаги работы с интерфейсом I2C** с использованием **LL (Low Layer) драйверов**.

Проект создан для изучения базовой инициализации **GPIO** и периферии **I2C2**, а также формирования сигналов I2C, наблюдаемых с помощью **цифрового (логического) анализатора**.

## Аппаратная платформа

- Микроконтроллер: **STM32F401RCT6**
- Отладочная плата на базе STM32F401
- Цифровой анализатор (Logic Analyzer)
- Интерфейс: **I2C2**
  - SDA
  - SCL
- Подтягивающие резисторы на линиях SDA/SCL  

Проект сгенерирован с помощью **STM32CubeMX**.  
Весь пользовательский код находится в папке **User** и в файле **main.c**.

## Логика работы

1. Инициализация системных тактов
2. Инициализация GPIO для SDA и SCL
3. Инициализация I2C2 (LL)
4. Формирование START condition
5. Передача адреса и тестовых данных
6. Формирование STOP condition

Проект не обрабатывает ответы ведомого и не проверяет ACK/NACK —  
целью является **изучение формы сигналов и последовательности обмена**

## Цели учебного проекта

- Понять:
  - принцип работы интерфейса I2C
  - роль подтягивающих резисторов
  - формирование START / STOP условий
- Научиться:
  - инициализировать I2C через LL
  - анализировать I2C-трафик логическим анализатором

---

# Четвертый этап - BH1750 (I2C, LL, UART DMA)

Учебный проект для изучения работы с шиной **I2C** на микроконтроллерах **STM32F4** с использованием **LL (Low Layer) драйверов**.

В проекте реализовано управление датчиком освещённости **BH1750** через терминал по **USART2**.  
Команды принимаются с использованием **DMA в circular mode**, данные с датчика считываются по **I2C1**.

## Используемое оборудование

- Микроконтроллер: **STM32F4**
- Датчик освещённости: **BH1750**
- Интерфейс связи с ПК: **USART2**
- Терминал: любой (PuTTY, TeraTerm, VS Code Serial Monitor и т.п.)

## Используемые периферийные блоки

### I2C
- **I2C1**
- Режим: Master
- Скорость: Standard Mode (100 kHz)
- Используются LL-функции (`stm32f4xx_ll_i2c.h`)

### UART
- **USART2**
- Приём данных: **DMA, Circular Mode**
- Используется для приёма текстовых команд

##  Принцип работы BH1750

1. МК отправляет команду измерения по I2C
2. Датчик выполняет измерение
3. Через заданную задержку считываются 2 байта данных
4. Значение преобразуется в люксы:

## Цели учебного проекта

- Понять:
  - как работает протокол **I2C**
  - как STM32 различает адрес и данные
  - что означают флаги `SB`, `ADDR`, `TXE`, `RXNE`
- Закрепить:
  - работу с **LL-драйверами**
  - приём данных по **UART + DMA**
  - базовую архитектуру embedded-проекта

